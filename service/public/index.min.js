import express from"express";import dotenv from"dotenv";import cors from"cors";import mongoose from"mongoose";import initRoutes from"./routes/routeIndex.js";dotenv.config();let app=express(),port=process.env.PORT||3e3,mongoURI=(app.use(cors()),app.use(express.json()),app.use(express.urlencoded({extended:!0})),app.use("/uploads",express.static("uploads")),process.env.MONGO_CONNECTION);mongoose.connect(mongoURI,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(()=>{console.log("Connected to MongoDB successfully")}).catch(o=>{console.error("Failed to connect to MongoDB:",o.message),process.exit(1)}),app.use((o,e,s)=>{if(1!==mongoose.connection.readyState)return e.status(500).send("Database connection failed");s()}),initRoutes(app),app.listen(port,()=>{console.log("Server running at port "+port)});